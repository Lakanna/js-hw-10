{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  btnStartTimer: document.querySelector('button[data-start]'),\n  btnStopTimer: document.querySelector('button[data-stop]'),\n  fieldDays: document.querySelector('span[data-days]'),\n  fieldHours: document.querySelector('span[data-hours]'),\n  fieldMinutes: document.querySelector('span[data-minutes]'),\n  fieldSeconds: document.querySelector('span[data-seconds]'),\n  inputDate: document.querySelector('#datetime-picker'),\n  greetText: document.querySelector('.greeting-text'),\n};\n\nlet userSelectedDate = 0;\nlet currentTime = Date.now();\nlet setId = 0;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = Number(selectedDates[0]);\n    let differTime = userSelectedDate - currentTime;\n    console.log(differTime);\n\n    if (differTime <= 0) {\n      iziToast.warning({\n        title: 'Caution',\n        message: 'Please choose a date in the future',\n        color: 'red',\n        position: 'topCenter',\n      });\n      elements.btnStartTimer.disabled = true;\n    } else {\n      elements.btnStartTimer.disabled = false;\n    }\n  },\n};\n\nflatpickr('input#datetime-picker', options);\n\nelements.btnStartTimer.addEventListener('click', handlerStartTimer);\nelements.btnStopTimer.addEventListener('click', handlerStopTimer);\n\nfunction handlerStopTimer() {\n  clearInterval(setId);\n  const zeroValue = addLeadingZero(0);\n  elements.fieldDays.textContent = zeroValue;\n  elements.fieldHours.textContent = zeroValue;\n  elements.fieldMinutes.textContent = zeroValue;\n  elements.fieldSeconds.textContent = zeroValue;\n  elements.btnStartTimer.disabled = false;\n  elements.inputDate.disabled = false;\n  elements.btnStopTimer.disabled = true;\n  elements.greetText.textContent = `Let's try it!😎`;\n}\n\nfunction handlerStartTimer() {\n  setId = setInterval(getTime, 1000);\n  elements.btnStartTimer.disabled = true;\n  elements.inputDate.disabled = true;\n  elements.btnStopTimer.disabled = false;\n  elements.greetText.textContent = 'Good job!👍';\n}\n\nfunction getTime() {\n  let currentTime = Date.now();\n  let differTime = userSelectedDate - currentTime;\n  if (differTime <= 0) {\n    elements.btnStartTimer.disabled = false;\n    elements.inputDate.disabled = false;\n    elements.btnStopTimer.disabled = true;\n    elements.greetText.textContent = `Let's try it!😎`;\n    return;\n  }\n\n  let restOfTime = convertMs(differTime);\n\n  elements.fieldDays.textContent = addLeadingZero(restOfTime.days);\n  elements.fieldHours.textContent = addLeadingZero(restOfTime.hours);\n  elements.fieldMinutes.textContent = addLeadingZero(restOfTime.minutes);\n  elements.fieldSeconds.textContent = addLeadingZero(restOfTime.seconds);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["elements","userSelectedDate","currentTime","setId","options","selectedDates","differTime","iziToast","flatpickr","handlerStartTimer","handlerStopTimer","zeroValue","addLeadingZero","getTime","restOfTime","convertMs","ms","days","hours","minutes","seconds","value"],"mappings":"2FAKA,MAAMA,EAAW,CACf,cAAe,SAAS,cAAc,oBAAoB,EAC1D,aAAc,SAAS,cAAc,mBAAmB,EACxD,UAAW,SAAS,cAAc,iBAAiB,EACnD,WAAY,SAAS,cAAc,kBAAkB,EACrD,aAAc,SAAS,cAAc,oBAAoB,EACzD,aAAc,SAAS,cAAc,oBAAoB,EACzD,UAAW,SAAS,cAAc,kBAAkB,EACpD,UAAW,SAAS,cAAc,gBAAgB,CACpD,EAEA,IAAIC,EAAmB,EACnBC,EAAc,KAAK,MACnBC,EAAQ,EAEZ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBJ,EAAmB,OAAOI,EAAc,CAAC,CAAC,EAC1C,IAAIC,EAAaL,EAAmBC,EACpC,QAAQ,IAAII,CAAU,EAElBA,GAAc,GAChBC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,qCACT,MAAO,MACP,SAAU,WAClB,CAAO,EACDP,EAAS,cAAc,SAAW,IAElCA,EAAS,cAAc,SAAW,EAErC,CACH,EAEAQ,EAAU,wBAAyBJ,CAAO,EAE1CJ,EAAS,cAAc,iBAAiB,QAASS,CAAiB,EAClET,EAAS,aAAa,iBAAiB,QAASU,CAAgB,EAEhE,SAASA,GAAmB,CAC1B,cAAcP,CAAK,EACnB,MAAMQ,EAAYC,EAAe,CAAC,EAClCZ,EAAS,UAAU,YAAcW,EACjCX,EAAS,WAAW,YAAcW,EAClCX,EAAS,aAAa,YAAcW,EACpCX,EAAS,aAAa,YAAcW,EACpCX,EAAS,cAAc,SAAW,GAClCA,EAAS,UAAU,SAAW,GAC9BA,EAAS,aAAa,SAAW,GACjCA,EAAS,UAAU,YAAc,iBACnC,CAEA,SAASS,GAAoB,CAC3BN,EAAQ,YAAYU,EAAS,GAAI,EACjCb,EAAS,cAAc,SAAW,GAClCA,EAAS,UAAU,SAAW,GAC9BA,EAAS,aAAa,SAAW,GACjCA,EAAS,UAAU,YAAc,aACnC,CAEA,SAASa,GAAU,CACjB,IAAIX,EAAc,KAAK,MACnBI,EAAaL,EAAmBC,EACpC,GAAII,GAAc,EAAG,CACnBN,EAAS,cAAc,SAAW,GAClCA,EAAS,UAAU,SAAW,GAC9BA,EAAS,aAAa,SAAW,GACjCA,EAAS,UAAU,YAAc,kBACjC,MACD,CAED,IAAIc,EAAaC,EAAUT,CAAU,EAErCN,EAAS,UAAU,YAAcY,EAAeE,EAAW,IAAI,EAC/Dd,EAAS,WAAW,YAAcY,EAAeE,EAAW,KAAK,EACjEd,EAAS,aAAa,YAAcY,EAAeE,EAAW,OAAO,EACrEd,EAAS,aAAa,YAAcY,EAAeE,EAAW,OAAO,CACvE,CAEA,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASR,EAAeS,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}